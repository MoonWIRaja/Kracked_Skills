# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ # SKILL 6: CODE REVIEW GUIDELINES # Scope: Global | File: 06-code-review.md # ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ ## When to Apply When reviewing code changes, performing quality checks, or validating code before merge/deployment. ## Review Checklist ### Correctness - Logic handles all edge cases - Error conditions are handled appropriately - Null/undefined values are checked - Async operations handle failures - Race conditions are prevented ### Security - User input is validated and sanitized - No hardcoded secrets or credentials - SQL/NoSQL injection prevented - XSS vulnerabilities addressed - Authentication/authorization checked - Sensitive data not logged ### Performance - No unnecessary re-renders (React) - Database queries are optimized - No N+1 query patterns - Large lists use virtualization - Images are optimized ### Maintainability - Code is self-documenting - Functions have single responsibility - No magic numbers or strings - Types are properly defined - Naming is clear and consistent ## Common Bug Patterns ### Async/Await Pitfalls ```typescript // BUG: Unhandled promise rejection async function fetchData() { const data = await api.get('/data'); return data; } // FIX: Handle errors async function fetchData() { try { const data = await api.get('/data'); return data; } catch (error) { logger.error('Failed to fetch data', error); throw new AppError('DATA_FETCH_FAILED'); } } ``` ### State Update Issues ```typescript // BUG: Stale closure const [count, setCount] = useState(0); const increment = () => setCount(count + 1); // FIX: Use functional update const increment = () => setCount(c => c + 1); ``` ### Memory Leaks ```typescript // BUG: Missing cleanup useEffect(() => { const subscription = events.subscribe(handler); }, []); // FIX: Return cleanup function useEffect(() => { const subscription = events.subscribe(handler); return () => subscription.unsubscribe(); }, []); ``` ## Code Smells to Flag ### Complexity - Functions longer than 50 lines - More than 3 levels of nesting - More than 4 parameters - Cyclomatic complexity > 10 ### Duplication - Copy-pasted logic blocks - Similar switch/if chains - Repeated validation logic ### Poor Abstractions - God objects/components - Feature envy (accessing other module internals) - Premature optimization - Over-engineering simple solutions ## Review Response Format ```text ## Summary [Brief overall assessment] ## Critical Issues - [ ] [Issue]: [Description] — [Suggested fix] ## Suggestions - [ ] [Area]: [Recommendation] ## Questions - [Question about implementation choice] ## Praise - [Specific positive feedback] ``` ## Approval Criteria ### Must Fix Before Merge - Security vulnerabilities - Data loss risks - Breaking changes without migration - Missing error handling for critical paths ### Should Fix (Can Merge) - Performance improvements - Code style consistency - Minor refactoring opportunities - Documentation gaps